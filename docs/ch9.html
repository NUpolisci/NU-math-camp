<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Chapter 9 Data Visualization and ggplot2 | Computational Programming for the Social Sciences</title>
<meta name="author" content="Sarah Moore and Jean Clipperton">
<meta name="description" content="In this chapter: Applying skills from tidyverse to visualizing data in R Defining the type of graph desired via geom_ functions Playing around with ggthemes and other graphical specifications Some...">
<meta name="generator" content="bookdown 0.26 with bs4_book()">
<meta property="og:title" content="Chapter 9 Data Visualization and ggplot2 | Computational Programming for the Social Sciences">
<meta property="og:type" content="book">
<meta property="og:description" content="In this chapter: Applying skills from tidyverse to visualizing data in R Defining the type of graph desired via geom_ functions Playing around with ggthemes and other graphical specifications Some...">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Chapter 9 Data Visualization and ggplot2 | Computational Programming for the Social Sciences">
<meta name="twitter:description" content="In this chapter: Applying skills from tidyverse to visualizing data in R Defining the type of graph desired via geom_ functions Playing around with ggthemes and other graphical specifications Some...">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.3.1/transition.js"></script><script src="libs/bs3compat-0.3.1/tabs.js"></script><script src="libs/bs3compat-0.3.1/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><style type="text/css">
    
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  </style>
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">Computational Programming for the Social Sciences</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html"><span class="header-section-number">1</span> Welcome!</a></li>
<li><a class="" href="ch2.html"><span class="header-section-number">2</span> Getting Started</a></li>
<li><a class="" href="ch3.html"><span class="header-section-number">3</span> Documentation with LATEX</a></li>
<li><a class="" href="ch4.html"><span class="header-section-number">4</span> Integrating R with Github</a></li>
<li><a class="" href="ch5.html"><span class="header-section-number">5</span> Basic R Syntax, Data Types, and Structures</a></li>
<li><a class="" href="ch6.html"><span class="header-section-number">6</span> Functions, Packages, and Doing Stuff with Data</a></li>
<li><a class="" href="ch7.html"><span class="header-section-number">7</span> Working with Existing Data + Making Homebases for R</a></li>
<li><a class="" href="ch8.html"><span class="header-section-number">8</span> Beyond Base R: Exploring the tidyverse</a></li>
<li><a class="active" href="ch9.html"><span class="header-section-number">9</span> Data Visualization and ggplot2</a></li>
</ul>

        <div class="book-extra">
          
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="ch9" class="section level1" number="9">
<h1>
<span class="header-section-number">9</span> Data Visualization and <code>ggplot2</code><a class="anchor" aria-label="anchor" href="#ch9"><i class="fas fa-link"></i></a>
</h1>
<p>In this chapter:</p>
<ul>
<li><p>Applying skills from <code>tidyverse</code> to visualizing data in R</p></li>
<li><p>Defining the type of graph desired via <code>geom_</code> functions</p></li>
<li><p>Playing around with <code>ggthemes</code> and other graphical specifications</p></li>
<li><p>Some suggestions and conventions for data visualization (i.e. Dos and Don’ts)</p></li>
</ul>
<div id="ggplot2" class="section level2" number="9.1">
<h2>
<span class="header-section-number">9.1</span> <code>ggplot2</code><a class="anchor" aria-label="anchor" href="#ggplot2"><i class="fas fa-link"></i></a>
</h2>
<p>In Chapter (<span class="citation">@ch8</span>) we talked about the suite of packages that compose the <code>tidyverse</code>. Remember mention of <code>ggplot2</code>? A visualization package so good that we don’t even bother teaching people how to visualize data in base R anymore? Well, in case you missed mention of this fabulous package, fear not. In this chapter we will cover the basics of <code>ggplot2</code>.</p>
<p>We won’t go into the underlying philosophy of <code>ggplot2</code> here and the Grammar of Graphics. But if you are interested in more of this Hadley Wickham’s free online text <a href="https://ggplot2-book.org/getting-started.html">ggplot2: Elegant Graphics for Data Analysis</a> goes into further details on these points. The book also goes into more detail than we can here on more specialized graph types and specifications. As you move forward, this will be a good resource to revisit.</p>
<p>More than just discovering the landscape of <code>ggplot2</code>, this chapter also contains some key takeaways about visualizing data in general. So, even if you prefer base R, <code>matplotlib</code> in Python, or just want to be a careful critic of data visualization in popular publications, this chapter will have good insight regarding what does and does not constitute good data viz practice.</p>
<p>Based on our work in the previous chapter, you have already downloaded <code>ggplot2</code> package. Some others that will be useful for this tutorial are <code>ggrepel</code>, <code>ggthemes</code>, <code>ggtext</code>, and <code>scales</code>. When you get a chance, install those. In the case that your code does not work later on, a missed install on one of these packages might be why. Piping and control over the verbiage from <code>dplyr</code> are pretty necessary to have a good command of <code>ggplot2</code>. So, if you are feeling unsure about those skills, revisit the sections on those items and practice with some more test data.</p>
<div class="sourceCode" id="cb35"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># install all the recommended packages at once </span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"ggrepel"</span>, <span class="st">"ggthemes"</span>, <span class="st">"ggtext"</span>, <span class="st">"scales"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
</div>
<div id="the-first-step-of-visualizing-data-know-the-data" class="section level2" number="9.2">
<h2>
<span class="header-section-number">9.2</span> The first step of visualizing data: KNOW THE DATA<a class="anchor" aria-label="anchor" href="#the-first-step-of-visualizing-data-know-the-data"><i class="fas fa-link"></i></a>
</h2>
<p><em>This chapter will be largely be an applied walk-through tutorial. Therefore, it is written as if you are working along with the text. While you can just easily copy and paste the code from the text to your R script, you will likely benefit from developing the memory around how to compose a plot code, so try to type the code as we go along.</em></p>
<p>Let’s start out by simply just loading in the <code>tidyverse</code> package, which loads in <code>ggplot2</code>. The data that we will use for this chapter are already loaded in with the package. We will first take a look at the <code>msleep</code> data. This is a dataset that details the sleep behaviors of various mammals gathered by Savage and West (2007). Let’s first get acquainted with the dataset and what kinds of variables we will be handling. Note that as long as you have loaded in <code>ggplot2</code> or <code>tidyverse</code> via the <code><a href="https://rdrr.io/r/base/library.html">library()</a></code> call, you will not have to do anything else to import data.</p>
<p>First, we can just check the dimensions of the data with <code>dim(msleep)</code>. Here we will see that there are 83 rows of data over 11 columns. This means that there are 83 observations for each of the 11 columns. We can also run <code>tibble(msleep)</code> to see a snippet of the data. Alternatively, you can check out the <code><a href="https://pillar.r-lib.org/reference/glimpse.html">glimpse()</a></code> function to see all of the column names. The variable names lead us to believe that the dataset contains a number of identifying traits of each mammal in the data, their sleep and waking patterns, and some other physical information. As we talked about before, codebooks are necessary to understand how data are measured and how to interpret different values. To access the codebook for this dataset you can access the help file via the call <code><a href="https://ggplot2.tidyverse.org/reference/msleep.html">?msleep</a></code>.</p>
<div class="sourceCode" id="cb36"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org">tidyverse</a></span><span class="op">)</span></span></code></pre></div>
<pre><code>## ── Attaching packages ─────────────────────────────────────── tidyverse 1.3.2 ──
## ✔ ggplot2 3.3.6     ✔ purrr   0.3.4
## ✔ tibble  3.1.8     ✔ dplyr   1.0.9
## ✔ tidyr   1.2.0     ✔ stringr 1.4.0
## ✔ readr   2.1.2     ✔ forcats 0.5.1
## ── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
## ✖ dplyr::filter() masks stats::filter()
## ✖ dplyr::lag()    masks stats::lag()</code></pre>
<div class="sourceCode" id="cb38"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/dim.html">dim</a></span><span class="op">(</span><span class="va">msleep</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] 83 11</code></pre>
<div class="sourceCode" id="cb40"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble</a></span><span class="op">(</span><span class="va">msleep</span><span class="op">)</span></span></code></pre></div>
<pre><code>## # A tibble: 83 × 11
##    name         genus vore  order conse…¹ sleep…² sleep…³ sleep…⁴ awake  brainwt
##    &lt;chr&gt;        &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;     &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt; &lt;dbl&gt;    &lt;dbl&gt;
##  1 Cheetah      Acin… carni Carn… lc         12.1    NA    NA      11.9 NA      
##  2 Owl monkey   Aotus omni  Prim… &lt;NA&gt;       17       1.8  NA       7    0.0155 
##  3 Mountain be… Aplo… herbi Rode… nt         14.4     2.4  NA       9.6 NA      
##  4 Greater sho… Blar… omni  Sori… lc         14.9     2.3   0.133   9.1  0.00029
##  5 Cow          Bos   herbi Arti… domest…     4       0.7   0.667  20    0.423  
##  6 Three-toed … Brad… herbi Pilo… &lt;NA&gt;       14.4     2.2   0.767   9.6 NA      
##  7 Northern fu… Call… carni Carn… vu          8.7     1.4   0.383  15.3 NA      
##  8 Vesper mouse Calo… &lt;NA&gt;  Rode… &lt;NA&gt;        7      NA    NA      17   NA      
##  9 Dog          Canis carni Carn… domest…    10.1     2.9   0.333  13.9  0.07   
## 10 Roe deer     Capr… herbi Arti… lc          3      NA    NA      21    0.0982 
## # … with 73 more rows, 1 more variable: bodywt &lt;dbl&gt;, and abbreviated variable
## #   names ¹​conservation, ²​sleep_total, ³​sleep_rem, ⁴​sleep_cycle
## # ℹ Use `print(n = ...)` to see more rows, and `colnames()` to see all variable names</code></pre>
<div class="sourceCode" id="cb42"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://pillar.r-lib.org/reference/glimpse.html">glimpse</a></span><span class="op">(</span><span class="va">msleep</span><span class="op">)</span></span></code></pre></div>
<pre><code>## Rows: 83
## Columns: 11
## $ name         &lt;chr&gt; "Cheetah", "Owl monkey", "Mountain beaver", "Greater shor…
## $ genus        &lt;chr&gt; "Acinonyx", "Aotus", "Aplodontia", "Blarina", "Bos", "Bra…
## $ vore         &lt;chr&gt; "carni", "omni", "herbi", "omni", "herbi", "herbi", "carn…
## $ order        &lt;chr&gt; "Carnivora", "Primates", "Rodentia", "Soricomorpha", "Art…
## $ conservation &lt;chr&gt; "lc", NA, "nt", "lc", "domesticated", NA, "vu", NA, "dome…
## $ sleep_total  &lt;dbl&gt; 12.1, 17.0, 14.4, 14.9, 4.0, 14.4, 8.7, 7.0, 10.1, 3.0, 5…
## $ sleep_rem    &lt;dbl&gt; NA, 1.8, 2.4, 2.3, 0.7, 2.2, 1.4, NA, 2.9, NA, 0.6, 0.8, …
## $ sleep_cycle  &lt;dbl&gt; NA, NA, NA, 0.1333333, 0.6666667, 0.7666667, 0.3833333, N…
## $ awake        &lt;dbl&gt; 11.9, 7.0, 9.6, 9.1, 20.0, 9.6, 15.3, 17.0, 13.9, 21.0, 1…
## $ brainwt      &lt;dbl&gt; NA, 0.01550, NA, 0.00029, 0.42300, NA, NA, NA, 0.07000, 0…
## $ bodywt       &lt;dbl&gt; 50.000, 0.480, 1.350, 0.019, 600.000, 3.850, 20.490, 0.04…</code></pre>
<div class="sourceCode" id="cb44"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="op">?</span><span class="va">msleep</span></span></code></pre></div>
<div id="exercise-2" class="section level3" number="9.2.1">
<h3>
<span class="header-section-number">9.2.1</span> Exercise<a class="anchor" aria-label="anchor" href="#exercise-2"><i class="fas fa-link"></i></a>
</h3>
<ol style="list-style-type: decimal">
<li>Given this basic data exploration and the information from the codebook, what <em>types</em> of variables are each of the following:</li>
</ol>
<ul>
<li><p>name</p></li>
<li><p>sleep_total</p></li>
<li><p>brainwt</p></li>
<li><p>vore</p></li>
</ul>
<ol start="2" style="list-style-type: decimal">
<li>Categorical variables might be loaded into R by the class <em>factor</em> or <em>character</em>. How are categorical variables classed in this dataset?</li>
</ol>
</div>
</div>
<div id="building-a-plot" class="section level2" number="9.3">
<h2>
<span class="header-section-number">9.3</span> Building a plot<a class="anchor" aria-label="anchor" href="#building-a-plot"><i class="fas fa-link"></i></a>
</h2>
<p>Plots in <code>ggplot2</code> are built on the following elements:</p>
<ol style="list-style-type: decimal">
<li><p>Specified dataframe or other data object</p></li>
<li><p>Chosen aesthetics to map to each axes given <code><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes()</a></code></p></li>
<li><p>A layer identifying what type of graph you want to build given a <code>geom</code> function</p></li>
</ol>
<p>All additional specifications are auxiliary to the base plot.</p>
<p>In the case of the <code>msleep</code> data, let’s say we want to plot a histogram of the <code>vore</code> variable. We will start with specifying the data, then containing the chosen variable in the <code><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes()</a></code> specification. Because there is only one variable, we only set the specification <code>vore</code> on the x variable argument. To add the <code>geom_bar</code> layer, use <code>+</code>. <strong>The plus sign is how you will append new layers to all plots created in <code>ggplot2</code>.</strong> For now, just append <code><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_bar()</a></code> without adding any additional arguments.</p>
<div class="sourceCode" id="cb45"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># histogram of vore variable, v1 </span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">msleep</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x<span class="op">=</span><span class="va">vore</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_bar</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>It is conventional that you would create a new line of code after each <code>+</code> appending a specification on to a plot. We suggest this to make identifying the constitutive parts of a graph easier, which further helps with debugging if certain parts of the code are wonky.</p>
<p>Now try to run the same code, but instead make the <code>geom</code> function <code><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html">geom_histogram()</a></code>.</p>
<div class="sourceCode" id="cb46"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># histogram of vore variable, v2 </span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">msleep</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x<span class="op">=</span><span class="va">vore</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html">geom_histogram</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>When you run this code, you will still encounter a warning. This is because the function for <code><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html">geom_histogram()</a></code> is reserved for continuous variables. However, we can still use <code><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html">geom_histogram()</a></code> in a roundabout way if we choose.</p>
<p>Given that <code>vore</code> is a character variable, there is no natural way that ggplot knows to graph it to the x axis. Therefore, we have to specify that we want counts of the specified x variable. You can do this in the geom function by specifying <code>geom_histogram(stat='count')</code>. This will coerce <code>ggplot2</code> to include each of the categories of the specified variable as a bin on the histogram.</p>
<p>Check out the following plot, what happens when you use <code><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html">geom_histogram()</a></code> now?</p>
<div class="sourceCode" id="cb47"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># histogram of vore variable, v3 </span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">msleep</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x<span class="op">=</span><span class="va">vore</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html">geom_histogram</a></span><span class="op">(</span>stat<span class="op">=</span><span class="st">'count'</span><span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="08-data-viz_files/figure-html/unnamed-chunk-5-1.png" width="672"></div>
<div id="adding-data-to-the-plot" class="section level3" number="9.3.1">
<h3>
<span class="header-section-number">9.3.1</span> Adding data to the plot<a class="anchor" aria-label="anchor" href="#adding-data-to-the-plot"><i class="fas fa-link"></i></a>
</h3>
<p>There are two ways to add data into your <code>ggplot2</code> visualization. The first is the basic way that we performed above where you merely make the dataframe the first argument of the <code><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot()</a></code> call.</p>
<p>The second way allows you to work with more nuanced versions of your data and works off of a <code>%&gt;%</code> pipe. Instead of making your data an argument in <code><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot()</a></code> the data will precede the plot function with a pipe, as shown in option 2 in the code below. When data is added in this way, the arguments in the <code><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot()</a></code> function skip straight to specifying <code><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes()</a></code>.</p>
<div class="sourceCode" id="cb48"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># option 1 for adding data to the plot </span></span>
<span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">data</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="va">x</span>,<span class="va">y</span><span class="op">)</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#option 2 for adding data to the plot </span></span>
<span></span>
<span><span class="va">data</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="va">x</span>,<span class="va">y</span><span class="op">)</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>The second option to specify the data source is useful when you want to use <code><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate()</a></code>, <code><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarize()</a></code>, <code><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by()</a></code>, or another <code>dplyr</code> verb on a variable in the dataset and then graph the resulting value. For example, in the graph below we can plot the mean <code>sleep_total</code> based on a mammal’s classification in the <code>vore</code> variable. To do so, we create a pipe preceding the <code><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot()</a></code> call that groups the mammals based on their <code>vore</code> attribute, and then summarize the <code>vore</code> variable via the <code><a href="https://rdrr.io/r/base/mean.html">mean()</a></code> function.</p>
<div class="sourceCode" id="cb49"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># start the pipe with the data</span></span>
<span></span>
<span><span class="va">msleep</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">vore</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>  <span class="co"># use group_by() on the grouping variable in question</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarize</a></span><span class="op">(</span>vore_sleep<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">sleep_total</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="co"># use summarize() to create an intermediate variable that is the group mean sleep_total</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">vore</span>, y <span class="op">=</span> <span class="va">vore_sleep</span><span class="op">)</span><span class="op">)</span><span class="op">+</span> <span class="co"># begin the ggplot() call and specify the intermediate variable and grouping variable </span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_bar</a></span><span class="op">(</span>stat<span class="op">=</span><span class="st">"identity"</span><span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="08-data-viz_files/figure-html/unnamed-chunk-7-1.png" width="672"></div>
<p><strong>Based on this plot, which type of mammal has the greatest average sleep time?</strong></p>
</div>
<div id="basic-aes-arguments" class="section level3" number="9.3.2">
<h3>
<span class="header-section-number">9.3.2</span> Basic <code>aes()</code> arguments<a class="anchor" aria-label="anchor" href="#basic-aes-arguments"><i class="fas fa-link"></i></a>
</h3>
<p>The <code><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes()</a></code> function of a <code>ggplot</code> maps the aesthetics of the graph. The most basic of these are the arguments <code>x</code> and <code>y</code>, which will always correspond to the first two arguments of the function. It is unncessary to type the <code>x =</code> and <code>y =</code> arguments, but is always useful just to make sure that you are putting in the correct place.</p>
<p>Aside from the basic axes arguments, the <code><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes()</a></code> function can take a few more specifications that will further add detail to the plot. In case you want to add more data into the main specifications of the plot, you can also specify arguments for <code>color</code>, <code>fill</code>, <code>shape</code>, and <code>size</code>.</p>
<ul>
<li><p><code>color</code>: specifies an outline color to put around the geom layer representing the primary (x,y) observation</p></li>
<li><p><code>fill</code>: specifies a fill color for the geom layer given a variable outside of the primary (x,y) relationship. Discrete variables will fill solid colors, whereas continuous variables will fill a color scale.</p></li>
<li><p><code>shape</code>: behaves similarly to the <code>color</code> and <code>fill</code> functions, but instead changes the shape icon indicated by the geom_ layer, best fit for <code><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point()</a></code> applications</p></li>
<li><p><code>size</code>: varies the size of the (x,y) observation indicated in <code><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes()</a></code> based on a third variable, also likely best fit for <code><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point()</a></code> applications</p></li>
</ul>
<p>Recall the histogram example from above, where we plotted the counts of the <code>vore</code> variable. We can use the <code>fill</code> argument to specify that we would also like for the graph to show the conservation status within each of the <code>vore</code> groups. In turn, ggplot will return the same histogram with the bars broken up into different colors and an accompanying legend as to what each fill color represents. Check out the code below and try for yourself.</p>
<div class="sourceCode" id="cb50"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">msleep</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x<span class="op">=</span><span class="va">vore</span>, fill<span class="op">=</span><span class="va">conservation</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html">geom_histogram</a></span><span class="op">(</span>stat<span class="op">=</span><span class="st">"count"</span><span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="08-data-viz_files/figure-html/unnamed-chunk-8-1.png" width="672"></div>
<div id="exercise-3" class="section level4" number="9.3.2.1">
<h4>
<span class="header-section-number">9.3.2.1</span> Exercise<a class="anchor" aria-label="anchor" href="#exercise-3"><i class="fas fa-link"></i></a>
</h4>
<p>Now you will have the chance to try one out on your own. The above graph shows the count of mammal membership across each value of <code>vore</code> further broken down by mammal conservation status.</p>
<ol style="list-style-type: decimal">
<li>Now, <strong>graph a histogram of the conservation status of the mammals in the dataset, while also accounting for their <code>vore</code> value.</strong>
</li>
</ol>
<p><em>Hint</em>: Switch around the variables in the <code>x</code> and <code>fill</code> arguments in the code from the previous graph.</p>
<ol start="2" style="list-style-type: decimal">
<li><p>How does this graph differ from the previous example?</p></li>
<li><p>Now, instead of specifying a <code>fill</code> argument, try using the same variable in the <code>color</code> argument. What is the difference from the graph employing the <code>fill</code> argument?</p></li>
<li><p>Do the same thing, instead specifying the <code>size</code> or <code>shape</code> arguments. Is there an issue with these graphs?</p></li>
</ol>
</div>
</div>
<div id="basic-geom-layers" class="section level3" number="9.3.3">
<h3>
<span class="header-section-number">9.3.3</span> Basic <code>geom</code> layers<a class="anchor" aria-label="anchor" href="#basic-geom-layers"><i class="fas fa-link"></i></a>
</h3>
<p>As you may have noticed from earlier examples, the <code>geom</code> function has different suffixes which allow you to tell ggplot which type of graph you’d like to plot. In the previous exercise, we worked with two pretty straightforward functions: <code><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html">geom_histogram()</a></code> and <code><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_bar()</a></code>. These are good options when you are dealing with counts, or percentages in the case of the bar graph. But what about for other data? Rather than tell you the uses of these one by one, we can see examples graphically.</p>
<p>For illustrating the <code>geom</code> layers, we’ll use another dataset contained within the <code>ggplot2</code> package called <code>economics</code>. The <code>economics</code> data is a time series dataset with dated information on personal consumption expenditures in billions of dollars (<code>pce</code>), population in thousands (<code>pop</code>), personal savings rates (<code>psavert</code>), median duration of unemployment (<code>uempmed</code>), and number of unemployed people in thousands (<code>unemploy</code>). These six variables are accounted for over 574 observations.</p>
<ol style="list-style-type: decimal">
<li><code><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point()</a></code></li>
</ol>
<p>Creates a scatter plot of points for each (x,y) observation.</p>
<div class="sourceCode" id="cb51"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># create a scatterplot of the median duration of unemployment (x) and personal savings rates (y)</span></span>
<span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">economics</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">uempmed</span>, y <span class="op">=</span> <span class="va">psavert</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="08-data-viz_files/figure-html/unnamed-chunk-9-1.png" width="672"></div>
<ol start="2" style="list-style-type: decimal">
<li><code><a href="https://ggplot2.tidyverse.org/reference/geom_boxplot.html">geom_boxplot()</a></code></li>
</ol>
<p>Creates a boxplot of the distribution and quartiles of the specified variable(s). If both x and y are specified, one should be a discrete variable and the other should be continuous. This would entail that the distribution of the continuous variable is plotted over the subgroups of the discrete variable. Both options are shown below.</p>
<div class="sourceCode" id="cb52"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># create a boxplot of the distribution of the personal savings rate </span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">economics</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">psavert</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_boxplot.html">geom_boxplot</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="08-data-viz_files/figure-html/unnamed-chunk-10-1.png" width="672"></div>
<div class="sourceCode" id="cb53"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># create a boxplot of the personal savings rate above and below the median unemployment level </span></span>
<span></span>
<span><span class="va">economics</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>unemploy_med<span class="op">=</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/if_else.html">if_else</a></span><span class="op">(</span><span class="va">unemploy</span><span class="op">&lt;</span><span class="fu"><a href="https://rdrr.io/r/stats/median.html">median</a></span><span class="op">(</span><span class="va">unemploy</span>, na.rm<span class="op">=</span><span class="cn">T</span><span class="op">)</span>, <span class="fl">1</span>, <span class="fl">0</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">psavert</span>, y <span class="op">=</span> <span class="fu"><a href="https://forcats.tidyverse.org/reference/as_factor.html">as_factor</a></span><span class="op">(</span><span class="va">unemploy_med</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_boxplot.html">geom_boxplot</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><img src="08-data-viz_files/figure-html/unnamed-chunk-10-2.png" width="672">
3. <code><a href="https://ggplot2.tidyverse.org/reference/geom_path.html">geom_line()</a></code></p>
<p>Creates a line graph and best used for showing data over time.</p>
<div class="sourceCode" id="cb54"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># create a line graph of the median unemployment duration over time </span></span>
<span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">economics</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">date</span>, y <span class="op">=</span> <span class="va">uempmed</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html">geom_line</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><img src="08-data-viz_files/figure-html/unnamed-chunk-11-1.png" width="672">
4. <code><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_bar()</a></code> and <code><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html">geom_histogram()</a></code></p>
<p><code><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_bar()</a></code> and <code><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html">geom_histogram()</a></code> behave quite similarly. Though, as we mentioned before, <code><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_bar()</a></code> is for the discrete case and <code><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html">geom_histogram()</a></code> is for the continuous case (though we can coerce it to behave otherwise). Both of these plots can be used to show counts of observations.</p>
<div class="sourceCode" id="cb55"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># create a histogram of the total population in thousands, try different specifications of the `bins` argument in `geom_histogram()`</span></span>
<span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">economics</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">pop</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html">geom_histogram</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre><code>## `stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
<div class="inline-figure"><img src="08-data-viz_files/figure-html/unnamed-chunk-12-1.png" width="672"></div>
<div class="sourceCode" id="cb57"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">economics</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">pop</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html">geom_histogram</a></span><span class="op">(</span>bins<span class="op">=</span><span class="fl">100</span><span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="08-data-viz_files/figure-html/unnamed-chunk-12-2.png" width="672"></div>
<div class="sourceCode" id="cb58"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">economics</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">pop</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html">geom_histogram</a></span><span class="op">(</span>bins<span class="op">=</span><span class="fl">10</span><span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="08-data-viz_files/figure-html/unnamed-chunk-12-3.png" width="672"></div>
<div class="sourceCode" id="cb59"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># create a bar chart of the number of observations above and below the mean population </span></span>
<span></span>
<span><span class="va">economics</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>pop_mean<span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/if_else.html">if_else</a></span><span class="op">(</span><span class="va">pop</span><span class="op">&lt;</span><span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">pop</span>, na.rm<span class="op">=</span><span class="cn">T</span><span class="op">)</span>, <span class="fl">1</span>, <span class="fl">0</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>           <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fu"><a href="https://forcats.tidyverse.org/reference/as_factor.html">as_factor</a></span><span class="op">(</span><span class="va">pop_mean</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>           <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_bar</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><img src="08-data-viz_files/figure-html/unnamed-chunk-12-4.png" width="672"><strong>Challenge</strong>: Based on the above bar graph, do you think that the mean population in the economics data is equal to the median population in the data?</p>
<ol start="5" style="list-style-type: decimal">
<li>There are quite a few more <code>geom</code> functions in <code>ggplot2</code>. However, the remainder are not very useful for beginners. We assume that as you go on, you will look more into the types of plots that are best fit to show your data. You will also get a better hang of troubleshooting your visualizations as time goes on.</li>
</ol>
</div>
</div>
<div id="adding-flavor-to-your-base-plot" class="section level2" number="9.4">
<h2>
<span class="header-section-number">9.4</span> Adding flavor to your base plot<a class="anchor" aria-label="anchor" href="#adding-flavor-to-your-base-plot"><i class="fas fa-link"></i></a>
</h2>
<p>All the tools in the previous sections show you how to make a graph using <code>ggplot2</code> tools. But how do you make it better? You may have noticed in the graphs above that the axes labels are not formatted, there are no value labels, and while the general <code>ggplot2</code> grey and black theme is not terrible, it is a bit drab. These are quite easy fixes just by adding additional lines to the base ggplot appending <code>+</code> followed by a relevant ggplot function.</p>
<div id="labelling-the-axes" class="section level3" number="9.4.1">
<h3>
<span class="header-section-number">9.4.1</span> Labelling the Axes<a class="anchor" aria-label="anchor" href="#labelling-the-axes"><i class="fas fa-link"></i></a>
</h3>
<p>First, we will start with labelling your x and y axes and adding a title to your graph. There are a couple of different ways to do this, and there may be some contexts in which one way is better than the other. For now, the choice is likely one of preference and efficiency. This is to say, for now use whichever manner seems to be quicker for you to implement.</p>
<p>The first way is to specify a line a new function for each label. To do so, we’ll revisit the line graph from above that plots the median duration of employment over time. Using the same graph, first add the line <code><a href="https://ggplot2.tidyverse.org/reference/labs.html">xlab()</a></code> with a relevant title for the x-axis in quotation marks. Do the same, but instead specify <code><a href="https://ggplot2.tidyverse.org/reference/labs.html">ylab()</a></code> and a relevant title for the y-axis. Finally, think of a title for the whole graph and run this in quotation marks in the function <code><a href="https://ggplot2.tidyverse.org/reference/labs.html">ggtitle()</a></code>. Each of these specifications will allow you to add a label to the graph in stepwise fashion.</p>
<div class="sourceCode" id="cb60"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># let's revisit the line graph showing the duration of median unemployment over time from above </span></span>
<span></span>
<span><span class="co"># add an x label </span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">economics</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">date</span>, y <span class="op">=</span> <span class="va">uempmed</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html">geom_line</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">xlab</a></span><span class="op">(</span><span class="st">"Date"</span><span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="08-data-viz_files/figure-html/unnamed-chunk-13-1.png" width="672"></div>
<div class="sourceCode" id="cb61"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># add a y label </span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">economics</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">date</span>, y <span class="op">=</span> <span class="va">uempmed</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html">geom_line</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">ylab</a></span><span class="op">(</span><span class="st">"Median Unemployment Duration (in Weeks)"</span><span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="08-data-viz_files/figure-html/unnamed-chunk-13-2.png" width="672"></div>
<div class="sourceCode" id="cb62"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># add a title </span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">economics</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">date</span>, y <span class="op">=</span> <span class="va">uempmed</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html">geom_line</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">ggtitle</a></span><span class="op">(</span><span class="st">"Median Unemployment Duration over Time, 1976-2015 (monthly)"</span><span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="08-data-viz_files/figure-html/unnamed-chunk-13-3.png" width="672"></div>
<p>These stepwise functions can all be added line-by-line to produce the specified labels together.</p>
<div class="sourceCode" id="cb63"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># let's put it all together </span></span>
<span></span>
<span><span class="co"># can add each as separate lines </span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">economics</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">date</span>, y <span class="op">=</span> <span class="va">uempmed</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html">geom_line</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">xlab</a></span><span class="op">(</span><span class="st">"Date"</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">ylab</a></span><span class="op">(</span><span class="st">"Median Unemployment Duration (in Weeks)"</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">ggtitle</a></span><span class="op">(</span><span class="st">"Median Unemployment Duration over Time, 1976-2015 (monthly)"</span><span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="08-data-viz_files/figure-html/unnamed-chunk-14-1.png" width="672"></div>
<p>But, a potentially simpler way of doing this is just to combine each axis and title function into a single label function, as we’ve shown below. In this case, you can simply specify the labels in the function <code><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs()</a></code>, with each argument corresponding to a respective axis or the title. There may be complicated cases in which this is less efficient, but for now this code is likely the most efficient so long as the syntax is correct.</p>
<div class="sourceCode" id="cb64"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># or, can opt for a single function to label  </span></span>
<span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">economics</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">date</span>, y <span class="op">=</span> <span class="va">uempmed</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html">geom_line</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>x <span class="op">=</span> <span class="st">"Date"</span>, y <span class="op">=</span> <span class="st">"Median Unemployment Duration (in Weeks)"</span>, </span>
<span>       title <span class="op">=</span> <span class="st">"Median Unemployment Duration over Time, 1976-2015 (monthly)"</span><span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="08-data-viz_files/figure-html/unnamed-chunk-15-1.png" width="672"></div>
</div>
<div id="labelling-ticks" class="section level3" number="9.4.2">
<h3>
<span class="header-section-number">9.4.2</span> Labelling Ticks<a class="anchor" aria-label="anchor" href="#labelling-ticks"><i class="fas fa-link"></i></a>
</h3>
</div>
<div id="using-palettes-and-themes" class="section level3" number="9.4.3">
<h3>
<span class="header-section-number">9.4.3</span> Using Palettes and Themes<a class="anchor" aria-label="anchor" href="#using-palettes-and-themes"><i class="fas fa-link"></i></a>
</h3>
<p>The grey and black default of plots made with <code>ggplot2</code> isn’t the most appealing for visualizing data. You saw that we can alter these colors by specifying additional variables in the <code>color</code> argument. It’s also possible that we can provide our plot with color palette information to provide more colorful graphics.</p>
<p>Additionally, the base <code>ggplot2</code> font and layout might not be the most interesting to some. If this is the case, the <code>ggthemes</code> package allows you to override the base visualization theme entirely in favor of some alternative. While you could style a theme from scratch on your own, for now these preset themes will be great alternatives if you get bored of the typical <code>ggplot2</code> plot.</p>
<p>As an aside, you can also save a plot as you would any other object. For example, below we’ve saved the median unemployment duration as the object named <code>plot_unemployment</code>. After saving the base plot, you can then simply use the object name and append the additional plot specifications</p>
<p>To specify a different theme for a plot, you’ll first need to load the package <code>ggthemes</code>.</p>
<div class="sourceCode" id="cb65"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/jrnold/ggthemes">ggthemes</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">plot_unemployment</span><span class="op">&lt;-</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">economics</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">date</span>, y <span class="op">=</span> <span class="va">uempmed</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html">geom_line</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>x <span class="op">=</span> <span class="st">"Date"</span>, y <span class="op">=</span> <span class="st">"Median Unemployment Duration (in Weeks)"</span>, </span>
<span>       title <span class="op">=</span> <span class="st">"Median Unemployment Duration over Time, 1976-2015 (monthly)"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">plot_unemployment</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/pkg/ggthemes/man/theme_economist.html">theme_economist</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="08-data-viz_files/figure-html/unnamed-chunk-16-1.png" width="672"></div>
<div class="sourceCode" id="cb66"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">plot_unemployment</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/pkg/ggthemes/man/theme_fivethirtyeight.html">theme_fivethirtyeight</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="08-data-viz_files/figure-html/unnamed-chunk-16-2.png" width="672"></div>
<div class="sourceCode" id="cb67"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">plot_unemployment</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/pkg/ggthemes/man/theme_stata.html">theme_stata</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="08-data-viz_files/figure-html/unnamed-chunk-16-3.png" width="672"></div>
<p>```</p>

</div>
</div>
</div>
  <div class="chapter-nav">
<div class="prev"><a href="ch8.html"><span class="header-section-number">8</span> Beyond Base R: Exploring the tidyverse</a></div>
<div class="empty"></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#ch9"><span class="header-section-number">9</span> Data Visualization and ggplot2</a></li>
<li><a class="nav-link" href="#ggplot2"><span class="header-section-number">9.1</span> ggplot2</a></li>
<li>
<a class="nav-link" href="#the-first-step-of-visualizing-data-know-the-data"><span class="header-section-number">9.2</span> The first step of visualizing data: KNOW THE DATA</a><ul class="nav navbar-nav"><li><a class="nav-link" href="#exercise-2"><span class="header-section-number">9.2.1</span> Exercise</a></li></ul>
</li>
<li>
<a class="nav-link" href="#building-a-plot"><span class="header-section-number">9.3</span> Building a plot</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#adding-data-to-the-plot"><span class="header-section-number">9.3.1</span> Adding data to the plot</a></li>
<li><a class="nav-link" href="#basic-aes-arguments"><span class="header-section-number">9.3.2</span> Basic aes() arguments</a></li>
<li><a class="nav-link" href="#basic-geom-layers"><span class="header-section-number">9.3.3</span> Basic geom layers</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#adding-flavor-to-your-base-plot"><span class="header-section-number">9.4</span> Adding flavor to your base plot</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#labelling-the-axes"><span class="header-section-number">9.4.1</span> Labelling the Axes</a></li>
<li><a class="nav-link" href="#labelling-ticks"><span class="header-section-number">9.4.2</span> Labelling Ticks</a></li>
<li><a class="nav-link" href="#using-palettes-and-themes"><span class="header-section-number">9.4.3</span> Using Palettes and Themes</a></li>
</ul>
</li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
          
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>Computational Programming for the Social Sciences</strong>" was written by Sarah Moore and Jean Clipperton. It was last built on 2022-08-29.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script><script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>
</html>
